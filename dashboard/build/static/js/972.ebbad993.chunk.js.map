{"version":3,"file":"static/js/972.ebbad993.chunk.js","mappings":"yOAcA,MAiNA,EAjNyBA,KACvB,MAAMC,GAAYC,EAAAA,EAAAA,WACZ,SAAEC,IAAaC,EAAAA,EAAAA,KAAaC,GAAUA,EAAMC,QAC5C,UAAEC,EAAS,SAAEC,EAAQ,gBAAEC,EAAe,eAAEC,IAAmBN,EAAAA,EAAAA,KAC9DC,GAAUA,EAAMM,QAEb,WAAEC,IAAeC,EAAAA,EAAAA,OAChBC,EAAMC,IAAWC,EAAAA,EAAAA,WAAS,IAE1BC,EAAMC,IAAWF,EAAAA,EAAAA,UAAS,KAC1BG,EAAgBC,IAAqBJ,EAAAA,EAAAA,UAAS,IAE/CK,GAAWC,EAAAA,EAAAA,OACjBC,EAAAA,EAAAA,YAAU,KACRF,GAASG,EAAAA,EAAAA,IAAcrB,EAASsB,KAAK,GACpC,CAAC,CAACtB,EAASsB,QACdF,EAAAA,EAAAA,YAAU,KACRF,GAASK,EAAAA,EAAAA,IAAqBd,GAAY,GACzC,CAACA,IA2CJ,OA9BAW,EAAAA,EAAAA,YAAU,KACJb,IACFiB,EAAAA,EAAOC,KAAK,sBAAuBpB,EAASA,EAASqB,OAAS,IAC9DR,GAASS,EAAAA,EAAAA,OACX,GACC,CAACpB,EAAgBF,KACpBe,EAAAA,EAAAA,YAAU,KACRI,EAAAA,EAAOI,GAAG,oBAAqBC,IAC7BZ,EAAkBY,EAAI,IAEjB,KACLL,EAAAA,EAAOM,IAAI,mBAAmB,IAE/B,KACHV,EAAAA,EAAAA,YAAU,KACJJ,IAEAP,IAAeO,EAAee,UAC9B/B,EAASsB,MAAQN,EAAegB,UAEhCd,GAASe,EAAAA,EAAAA,IAAcjB,KAEvBkB,EAAAA,GAAMC,QAAQnB,EAAeoB,WAAfpB,mBACdE,GAASS,EAAAA,EAAAA,QAEb,GACC,CAACX,KACJI,EAAAA,EAAAA,YAAU,KAAO,IAADiB,EACG,QAAjBA,EAAAvC,EAAUwC,eAAO,IAAAD,GAAjBA,EAAmBE,eAAe,CAAEC,SAAU,UAAW,GACxD,CAACnC,KAEFoC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,oBAAmBC,UAChCF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,iEAAgEC,UAC7EC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,8BAA6BC,SAAA,EAC1CF,EAAAA,EAAAA,KAAA,OACEC,UAAS,kCAAAG,OACPlC,EAAO,eAAiB,gBAAe,0CACAgC,UAEzCC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,8EAA6EC,SAAA,EAC1FC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,kFAAiFC,SAAA,EAC9FF,EAAAA,EAAAA,KAAA,MAAAE,SAAI,eACJC,EAAAA,EAAAA,MAAA,QACEE,QAASA,IAAMlC,GAASD,GACxB+B,UAAU,iCAAgCC,SAAA,EAE1CF,EAAAA,EAAAA,KAACM,EAAAA,IAAS,IAAI,UAIjB3C,EAAU4C,KAAI,CAACC,EAAGC,KACjBN,EAAAA,EAAAA,MAACO,EAAAA,GAAI,CAEHC,GAAE,mCAAAP,OAAqCI,EAAEI,MACzCX,UAAS,8GAAgHC,SAAA,EAEzHC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,WAAUC,SAAA,EACvBF,EAAAA,EAAAA,KAAA,OACEC,UAAU,4EACVY,IAAI,0EACJC,IAAI,MAENd,EAAAA,EAAAA,KAAA,OAAKC,UAAU,8EAGjBD,EAAAA,EAAAA,KAAA,OAAKC,UAAU,kDAAiDC,UAC9DF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,2CAA0CC,UACvDF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,0BAAyBC,SAAEM,EAAEO,aAf1CN,WAuBbN,EAAAA,EAAAA,MAAA,OAAKF,UAAU,yCAAwCC,SAAA,EACrDC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,oCAAmCC,SAAA,EAE9CC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,wCAAuCC,SAAA,EACpDC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,WAAUC,SAAA,EACvBF,EAAAA,EAAAA,KAAA,OACEC,UAAU,gFACVY,IAAI,0EACJC,IAAI,MAENd,EAAAA,EAAAA,KAAA,OAAKC,UAAU,8EAEjBD,EAAAA,EAAAA,KAAA,MAAIC,UAAU,qCAAoCC,SAC/CrC,EAAgBkD,WAKvBf,EAAAA,EAAAA,KAAA,OACEK,QAASA,IAAMlC,GAASD,GACxB+B,UAAU,mJAAkJC,UAE5JC,EAAAA,EAAAA,MAAA,QAAAD,SAAA,EACEF,EAAAA,EAAAA,KAACgB,EAAAA,IAAM,IAAI,aAKjBhB,EAAAA,EAAAA,KAAA,OAAKC,UAAU,OAAMC,UACnBF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,oEAAmEC,SAC/ElC,EACCJ,EAAS2C,KAAI,CAACU,EAAGR,IACXQ,EAAE3B,WAAatB,GAEfgC,EAAAA,EAAAA,KAAA,OAEEkB,IAAK7D,EACL4C,UAAU,yCAAwCC,UAElDC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,8EAA6EC,SAAA,EAC1FF,EAAAA,EAAAA,KAAA,OAAAE,UACEF,EAAAA,EAAAA,KAAA,OACEC,UAAU,4EACVY,IAAI,0EACJC,IAAI,QAGRd,EAAAA,EAAAA,KAAA,OAAKC,UAAU,2HAA0HC,UACvIF,EAAAA,EAAAA,KAAA,QAAAE,SAAOe,EAAEE,gBAbRV,IAoBPT,EAAAA,EAAAA,KAAA,OAEEkB,IAAK7D,EACL4C,UAAU,uCAAsCC,UAEhDC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,8EAA6EC,SAAA,EAC1FF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,yHAAwHC,UACrIC,EAAAA,EAAAA,MAAA,QAAAD,SAAA,CAAOe,EAAEE,QAAQ,UAEnBnB,EAAAA,EAAAA,KAAA,OAAAE,UACEF,EAAAA,EAAAA,KAAA,OACEC,UAAU,4EACVY,IAAKtD,EAAS6D,MACdN,IAAI,WAZLL,MAqBbT,EAAAA,EAAAA,KAAA,OAAKC,UAAU,2EAA0EC,UACvFF,EAAAA,EAAAA,KAAA,QAAAE,SAAM,4BAMdC,EAAAA,EAAAA,MAAA,QAAMkB,SA3KFC,IAAO,IAADC,EAClBD,EAAEE,iBACF/C,GACEgD,EAAAA,EAAAA,IAAa,CACXnC,SAAU/B,EAASsB,IACnBU,UAAWvB,EACXK,OACA0C,KAAc,OAARxD,QAAQ,IAARA,GAAkB,QAAVgE,EAARhE,EAAUmE,gBAAQ,IAAAH,OAAV,EAARA,EAAoBI,YAG9BrD,EAAQ,GAAG,EAiKmB2B,UAAU,aAAYC,SAAA,EAC1CF,EAAAA,EAAAA,KAAA,SACE4B,MAAOvD,EACPwD,SAAWP,GAAMhD,EAAQgD,EAAEQ,OAAOF,OAClC3B,UAAU,6JACV8B,KAAK,OACLC,YAAY,wBAEdhC,EAAAA,EAAAA,KAAA,UAAQC,UAAU,yIAAwIC,SAAC,qBAO/J,C","sources":["views/seller/SellerToCustomer.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport { FaList } from \"react-icons/fa6\";\r\nimport { IoMdClose } from \"react-icons/io\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  get_customer_message,\r\n  get_customers,\r\n  messageClear,\r\n  send_message,\r\n  updateMessage,\r\n} from \"../../store/Reducers/chatReducer\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport toast from \"react-hot-toast\";\r\nimport { socket } from \"../../utils/utils\";\r\nconst SellerToCustomer = () => {\r\n  const scrollRef = useRef();\r\n  const { userInfo } = useSelector((state) => state.auth);\r\n  const { customers, messages, currentCustomer, successMessage } = useSelector(\r\n    (state) => state.chat\r\n  );\r\n  const { customerId } = useParams();\r\n  const [show, setShow] = useState(false);\r\n  const sellerId = 65;\r\n  const [text, setText] = useState(\"\");\r\n  const [receverMessage, setReceverMessage] = useState(\"\");\r\n\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    dispatch(get_customers(userInfo._id));\r\n  }, [[userInfo._id]]);\r\n  useEffect(() => {\r\n    dispatch(get_customer_message(customerId));\r\n  }, [customerId]);\r\n  const send = (e) => {\r\n    e.preventDefault();\r\n    dispatch(\r\n      send_message({\r\n        senderId: userInfo._id,\r\n        receverId: customerId,\r\n        text,\r\n        name: userInfo?.shopInfo?.shopName,\r\n      })\r\n    );\r\n    setText(\"\");\r\n  };\r\n  useEffect(() => {\r\n    if (successMessage) {\r\n      socket.emit(\"send_seller_message\", messages[messages.length - 1]);\r\n      dispatch(messageClear());\r\n    }\r\n  }, [successMessage, messages]);\r\n  useEffect(() => {\r\n    socket.on(\"customer_message\", (msg) => {\r\n      setReceverMessage(msg);\r\n    });\r\n    return () => {\r\n      socket.off(\"customer_message\"); // Nettoie l'écouteur lorsque le composant est démonté\r\n    };\r\n  }, []);\r\n  useEffect(() => {\r\n    if (receverMessage) {\r\n      if (\r\n        customerId === receverMessage.senderId &&\r\n        userInfo._id === receverMessage.receverId\r\n      ) {\r\n        dispatch(updateMessage(receverMessage));\r\n      } else {\r\n        toast.success(receverMessage.senderName + \" \" + \"Send A message\");\r\n        dispatch(messageClear());\r\n      }\r\n    }\r\n  }, [receverMessage]);\r\n  useEffect(() => {\r\n    scrollRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [messages]);\r\n  return (\r\n    <div className=\"px-2 lg:px-7 py-5\">\r\n      <div className=\"w-full bg-[#6a5fdf] px-4 py-4 rounded-md h-[calc(100vh-140px)]\">\r\n        <div className=\"flex w-full h-full relative\">\r\n          <div\r\n            className={`w-[280px] h-full absolute z-10 ${\r\n              show ? \"-left-[16px]\" : \"-left-[336px]\"\r\n            } md:left-0 md:relative transition-all `}\r\n          >\r\n            <div className=\"w-full h-[calc(100vh-177px)] bg-[#9e97e9] md:bg-transparent overflow-y-auto\">\r\n              <div className=\"flex text-xl justify-between items-center p-4 md:p-0 md:px-3 md:pb-3 text-white\">\r\n                <h2>Customers</h2>\r\n                <span\r\n                  onClick={() => setShow(!show)}\r\n                  className=\"block cursor-pointer md:hidden\"\r\n                >\r\n                  <IoMdClose />{\" \"}\r\n                </span>\r\n              </div>\r\n\r\n              {customers.map((c, i) => (\r\n                <Link\r\n                  key={i}\r\n                  to={`/seller/dashboard/chat-customer/${c.fdId}`}\r\n                  className={`h-[60px] flex justify-start gap-2 items-center text-white px-2 py-2 rounded-md cursor-pointer bg-[#8288ed] `}\r\n                >\r\n                  <div className=\"relative\">\r\n                    <img\r\n                      className=\"w-[38px] h-[38px] border-white border-2 max-w-[38px] p-[2px] rounded-full\"\r\n                      src=\"https://ambitious-desert-0d4d5481e.1.azurestaticapps.net/images/man.png\"\r\n                      alt=\"\"\r\n                    />\r\n                    <div className=\"w-[10px] h-[10px] bg-green-500 rounded-full absolute right-0 bottom-0\"></div>\r\n                  </div>\r\n\r\n                  <div className=\"flex justify-center items-start flex-col w-full\">\r\n                    <div className=\"flex justify-between items-center w-full\">\r\n                      <h2 className=\"text-base font-semibold\">{c.name}</h2>\r\n                    </div>\r\n                  </div>\r\n                </Link>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"w-full md:w-[calc(100%-200px)] md:pl-4\">\r\n            <div className=\"flex justify-between items-center\">\r\n              {sellerId && (\r\n                <div className=\"flex justify-start items-center gap-3\">\r\n                  <div className=\"relative\">\r\n                    <img\r\n                      className=\"w-[45px] h-[45px] border-green-500 border-2 max-w-[45px] p-[2px] rounded-full\"\r\n                      src=\"https://ambitious-desert-0d4d5481e.1.azurestaticapps.net/images/man.png\"\r\n                      alt=\"\"\r\n                    />\r\n                    <div className=\"w-[10px] h-[10px] bg-green-500 rounded-full absolute right-0 bottom-0\"></div>\r\n                  </div>\r\n                  <h2 className=\"text-base text-white font-semibold\">\r\n                    {currentCustomer.name}\r\n                  </h2>\r\n                </div>\r\n              )}\r\n\r\n              <div\r\n                onClick={() => setShow(!show)}\r\n                className=\"w-[35px] flex md:hidden h-[35px] rounded-sm bg-blue-500 shadow-lg hover:shadow-blue-500/50 justify-center cursor-pointer items-center text-white\"\r\n              >\r\n                <span>\r\n                  <FaList />{\" \"}\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"py-4\">\r\n              <div className=\"bg-[#475569] h-[calc(100vh-290px)] rounded-md p-3 overflow-y-auto\">\r\n                {customerId ? (\r\n                  messages.map((m, i) => {\r\n                    if (m.senderId === customerId) {\r\n                      return (\r\n                        <div\r\n                          key={i}\r\n                          ref={scrollRef}\r\n                          className=\"w-full flex justify-start items-center\"\r\n                        >\r\n                          <div className=\"flex justify-start items-start gap-2 md:px-3 py-2 max-w-full lg:max-w-[85%]\">\r\n                            <div>\r\n                              <img\r\n                                className=\"w-[38px] h-[38px] border-2 border-white rounded-full max-w-[38px] p-[3px]\"\r\n                                src=\"https://ambitious-desert-0d4d5481e.1.azurestaticapps.net/images/man.png\"\r\n                                alt=\"\"\r\n                              />\r\n                            </div>\r\n                            <div className=\"flex justify-center items-start flex-col w-full bg-blue-500 shadow-lg shadow-blue-500/50 text-white py-1 px-2 rounded-sm\">\r\n                              <span>{m.message}</span>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    } else {\r\n                      return (\r\n                        <div\r\n                          key={i}\r\n                          ref={scrollRef}\r\n                          className=\"w-full flex justify-end items-center\"\r\n                        >\r\n                          <div className=\"flex justify-start items-start gap-2 md:px-3 py-2 max-w-full lg:max-w-[85%]\">\r\n                            <div className=\"flex justify-center items-start flex-col w-full bg-red-500 shadow-lg shadow-red-500/50 text-white py-1 px-2 rounded-sm\">\r\n                              <span>{m.message} </span>\r\n                            </div>\r\n                            <div>\r\n                              <img\r\n                                className=\"w-[38px] h-[38px] border-2 border-white rounded-full max-w-[38px] p-[3px]\"\r\n                                src={userInfo.image}\r\n                                alt=\"\"\r\n                              />\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    }\r\n                  })\r\n                ) : (\r\n                  <div className=\"w-full h-full flex justify-center items-center text-white gap-2 flex-col\">\r\n                    <span>Select Customer </span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            <form onSubmit={send} className=\"flex gap-3\">\r\n              <input\r\n                value={text}\r\n                onChange={(e) => setText(e.target.value)}\r\n                className=\"w-full flex justify-between px-2 border border-slate-700 items-center py-[5px] focus:border-blue-500 rounded-md outline-none bg-transparent text-[#d0d2d6]\"\r\n                type=\"text\"\r\n                placeholder=\"Input Your Message\"\r\n              />\r\n              <button className=\"shadow-lg bg-[#06b6d4] hover:shadow-cyan-500/50 text-semibold w-[75px] h-[35px] rounded-md text-white flex justify-center items-center\">\r\n                Send\r\n              </button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SellerToCustomer;\r\n"],"names":["SellerToCustomer","scrollRef","useRef","userInfo","useSelector","state","auth","customers","messages","currentCustomer","successMessage","chat","customerId","useParams","show","setShow","useState","text","setText","receverMessage","setReceverMessage","dispatch","useDispatch","useEffect","get_customers","_id","get_customer_message","socket","emit","length","messageClear","on","msg","off","senderId","receverId","updateMessage","toast","success","senderName","_scrollRef$current","current","scrollIntoView","behavior","_jsx","className","children","_jsxs","concat","onClick","IoMdClose","map","c","i","Link","to","fdId","src","alt","name","FaList","m","ref","message","image","onSubmit","e","_userInfo$shopInfo","preventDefault","send_message","shopInfo","shopName","value","onChange","target","type","placeholder"],"sourceRoot":""}