"use strict";(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[868],{868:(e,s,l)=>{l.r(s),l.d(s,{default:()=>o});var d=l(2791),i=l(4420),a=l(7689),n=l(8323),r=l(3402),t=l(1324),c=l(184);const o=()=>{var e,s,l,o,u,x,p;const{orderId:m}=(0,a.UO)(),v=(0,i.I0)(),[h,j]=(0,d.useState)(""),{order:f,errorMessage:g,successMessage:N}=(0,i.v9)((e=>e.order)),[y,b]=(0,d.useState)({}),[w,I]=(0,d.useState)({});(0,d.useEffect)((()=>{j(null===f||void 0===f?void 0:f.delivery_status)}),[f]),(0,d.useEffect)((()=>{v((0,n.yS)(m))}),[m,v]),(0,d.useEffect)((()=>{if(null!==f&&void 0!==f&&f.products){const e=[...new Set(f.products.map((e=>e.sellerId)))];Promise.all(e.map((e=>v((0,t.TZ)(e))))).then((e=>{const s=e.reduce(((e,s)=>{if("seller/get_seller/fulfilled"===s.type){const l=s.payload.seller;e[l._id]=l}return e}),{});b(s),console.log("Sellers:",s)})).catch((e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des vendeurs:",e)}))}}),[f]);return(0,d.useEffect)((()=>{N&&(r.ZP.success(N),v((0,n.od)())),g&&(r.ZP.error(g),v((0,n.od)()))}),[N,g,v]),(0,c.jsx)("div",{className:"px-2 lg:px-7 pt-5",children:(0,c.jsxs)("div",{className:"w-full p-4 bg-[#6a5fdf] rounded-md",children:[(0,c.jsxs)("div",{className:"flex justify-between items-center p-4",children:[(0,c.jsx)("h2",{className:"text-xl text-[#d0d2d6]",children:"Order Details"}),(0,c.jsxs)("select",{onChange:e=>{var s;const l=e.target.value;v((0,n.t3)({orderId:m,info:{status:l}})),j(l),null===f||void 0===f||null===(s=f.products)||void 0===s||s.forEach((e=>{const s=w[e._id];"processing"!==l&&"placed"!==l||s||(v((0,n.p)({productId:e._id,quantity:e.quantity})),I((s=>({...s,[e._id]:!0})))),"processing"!==l&&"placed"!==l&&s&&(v((0,n.rW)({productId:e._id,quantity:e.quantity})),I((s=>({...s,[e._id]:!1}))))}))},value:h,className:"px-4 py-2 focus:border-indigo-500 outline-none bg-[#475569] border border-slate-700 rounded-md text-[#d0d2d6]",children:[(0,c.jsx)("option",{value:"pending",children:"pending"}),(0,c.jsx)("option",{value:"processing",children:"processing"}),(0,c.jsx)("option",{value:"warehouse",children:"warehouse"}),(0,c.jsx)("option",{value:"placed",children:"placed"}),(0,c.jsx)("option",{value:"cancelled",children:"cancelled"})]})]}),(0,c.jsxs)("div",{className:"p-4",children:[(0,c.jsxs)("div",{className:"flex gap-2 text-lg text-[#d0d2d6]",children:[(0,c.jsxs)("h2",{children:["#",null===f||void 0===f?void 0:f._id]}),(0,c.jsx)("span",{children:null===f||void 0===f?void 0:f.date})]}),(0,c.jsxs)("div",{className:"flex flex-wrap",children:[(0,c.jsx)("div",{className:"w-[30%]",children:(0,c.jsxs)("div",{className:"pr-3 text-[#d0d2d6] text-lg",children:[(0,c.jsxs)("h2",{className:"pb-2 font-semibold",children:["Deliver To: ",null===f||void 0===f||null===(e=f.shippingInfo)||void 0===e?void 0:e.name]}),(0,c.jsxs)("p",{children:[null===f||void 0===f||null===(s=f.shippingInfo)||void 0===s?void 0:s.address," ",null===f||void 0===f||null===(l=f.shippingInfo)||void 0===l?void 0:l.province," ",null===f||void 0===f||null===(o=f.shippingInfo)||void 0===o?void 0:o.city," ",null===f||void 0===f||null===(u=f.shippingInfo)||void 0===u?void 0:u.area]}),(0,c.jsxs)("div",{className:"flex justify-start items-center gap-3",children:[(0,c.jsx)("h2",{children:"Payment Status:"}),(0,c.jsx)("span",{className:"text-base",children:null===f||void 0===f?void 0:f.payment_status})]}),(0,c.jsxs)("span",{children:["Price: ",null===f||void 0===f?void 0:f.price," TND"]}),(0,c.jsx)("div",{className:"mt-4 flex flex-col gap-4 bg-[#82888ed] rounded-md",children:(0,c.jsx)("div",{className:"text-[#d0d2d6]",children:null===f||void 0===f||null===(x=f.products)||void 0===x?void 0:x.map(((e,s)=>(0,c.jsxs)("div",{className:"flex items-center gap-3 text-md",children:[(0,c.jsx)("img",{className:"w-[70px] h-[70px]",src:e.images[0],alt:""})," ",(0,c.jsxs)("div",{className:"flex flex-col justify-between",children:[" ",(0,c.jsx)("h2",{className:"text-lg font-medium",children:e.name})," ",(0,c.jsxs)("p",{className:"flex items-center",children:[(0,c.jsx)("span",{children:"Brand: "}),(0,c.jsx)("span",{className:"ml-1",children:e.brand}),(0,c.jsxs)("span",{className:"text-lg ml-2",children:["Quantity: ",e.quantity]})]})]})]},s)))})})]})}),(0,c.jsx)("div",{className:"w-[70%]",children:(0,c.jsx)("div",{className:"pl-3",children:(0,c.jsx)("div",{className:"mt-4 flex flex-col bg-[#82888ed] rounded-md p-4",children:null===f||void 0===f||null===(p=f.suborder)||void 0===p?void 0:p.map(((e,s)=>{var l;return(0,c.jsxs)("div",{className:"text-[#d0d2d6] mt-2",children:[(0,c.jsx)("div",{className:"flex justify-start items-center gap-3",children:(0,c.jsxs)("h2",{children:["Suborder Status: ",e.delivery_status]})}),null===(l=e.products)||void 0===l?void 0:l.map(((e,s)=>(0,c.jsxs)("div",{className:"flex items-center gap-3 text-md mt-2",children:[(0,c.jsx)("img",{className:"w-[70px] h-[70px]",src:e.images[0],alt:""})," ",(0,c.jsxs)("div",{className:"flex flex-col justify-between",children:[(0,c.jsx)("h2",{className:"text-lg font-medium",children:e.name}),(0,c.jsxs)("p",{className:"flex items-center",children:[(0,c.jsx)("span",{children:"Brand: "}),(0,c.jsx)("span",{className:"ml-1",children:e.brand}),(0,c.jsxs)("span",{className:"text-lg ml-2",children:["Quantity: ",e.quantity]})]}),(0,c.jsxs)("p",{children:["Seller Name: ",y[e.sellerId]?y[e.sellerId].name:"Loading..."]})]})]},s)))]},s+20)}))})})})]})]})]})})}}}]);
//# sourceMappingURL=868.16b64ca8.chunk.js.map